mysql-ctl start
mysql -u derlloyd

show databases;

mysql> CREATE DATABASE decodemtl_addressbook;
Query OK, 1 row affected (0.00 sec)

use decodemtl_addressbook;


CREATE TABLE Account (id INT AUTO_INCREMENT PRIMARY KEY, 
    email VARCHAR(255),
    password VARCHAR(40),
    createdOn DATETIME,
    ModifiedOn DATETIME
);


CREATE TABLE AddressBook (
    id INT AUTO_INCREMENT PRIMARY KEY,
    accountID INT,
    name VARCHAR(255),
    createdOn DATETIME,
    modifiedOn DATETIME
);



CREATE TABLE Entry (
    id INT AUTO_INCREMENT PRIMARY KEY,
    addressBookId INT,
    firstName VARCHAR(255),
    lastName VARCHAR(255),
    birthday DATETIME,
    type ENUM("phone", "address", "electronic-mail"),
    createdOn DATETIME,
    modifiedOn DATETIME
);

CREATE TABLE Address (
    id INT AUTO_INCREMENT PRIMARY KEY,
    entryId INT,
    type ENUM("home", "work", "other"),
    addressLine1 VARCHAR(255),
    addressLine2 VARCHAR(255),
    city VARCHAR(255),
    province VARCHAR(255),
    country VARCHAR(255),
    postalCode VARCHAR(255),
    createdOn DATETIME,
    modifiedOn DATETIME
);

CREATE TABLE Phone (
    id INT AUTO_INCREMENT PRIMARY KEY,
    entryId INT,
    type ENUM("home", "work", "other"),
    subtype ENUM("landline", "cellular", "fax"),
    content VARCHAR(255),
    createdOn DATETIME,
    modifiedOn DATETIME
);


CREATE TABLE ElectronicMail (
    id INT AUTO_INCREMENT PRIMARY KEY,
    entryId INT,
    type ENUM("home", "work", "other"),
    content VARCHAR(255),
    createdOn DATETIME,
    modifiedOn DATETIME
);

ALTER TABLE AddressBook ADD FOREIGN KEY (accountId)
    REFERENCES Account(id)
    ON DELETE CASCADE;
    
ALTER TABLE Entry ADD FOREIGN KEY (addressBookId)
    REFERENCES AddressBook(id)
    ON DELETE CASCADE;
    

ALTER TABLE ElectronicMail ADD FOREIGN KEY (entryId)
    REFERENCES Entry(id)
    ON DELETE CASCADE;

Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0

